<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="js/commonLink.js" charset="utf-8" type="text/javascript"></script>

    <link rel="stylesheet" href="css/common_register.css">
    <link rel="stylesheet" href="css/visitor_register.css">
</head>
<body>
<script type="text/javascript" src="js/common-returnIndexBtn.js" charset="utf-8"></script>
<script src="js/commonHtml-sideNav.js" charset="utf-8" type="text/javascript"></script>
<div class="DM-container">
    <div class="contentBox common_register">
        <div class="table_box">
            <table class="table table-bordered" id="table-register" frame="void">
                <caption>今日借用物品</caption>
                <thead>
                <tr>
                    <th data-field="Name">访客姓名</th>
                    <th data-field="phone">联系方式</th>
                    <th data-field="D_num">访问宿舍</th>
                    <th data-field="rel">被访学生学号</th>
                    <th data-field="result">来访原因</th>
                    <th data-field="reach">到访时间</th>
                    <th data-field="leave">离开时间</th>
                </tr>
                </thead>
                <tbody>
                <div class="dataDetailsBox"></div>
                <tr>
                    <td>黄茂平</td>
                    <td>13546</td>
                    <td>19-410</td>
                    <td>2315435</td>
                    <td>探亲</td>
                    <td>2020.4.1</td>
                    <td><input type="text" id="leave_time"><button class="btn btn-success btn-leave" id="leave_sure">确认</button> </td>
                </tr>
                <tr>
                    <td>黄茂平</td>
                    <td>13546</td>
                    <td>19-410</td>
                    <td>2315435</td>
                    <td>探亲</td>
                    <td>2020.4.1</td>
                    <td>2020.5.4</td>
                </tr>
                <tr>
                    <td>黄茂平</td>
                    <td>13546</td>
                    <td>19-410</td>
                    <td>2315435</td>
                    <td>探亲</td>
                    <td>2020.4.1</td>
                    <td>2020.5.4</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="message_box">
            <div class="box chart_box">
                <canvas id="chart_borrow"></canvas>
            </div>
            <div class="box message_edit_box">
                <div class="message_edit_line">学号：
                    <input type="text" class="edit_input" placeholder="学号">
                </div>

                <div class="message_edit_line"> 物品：
                    <input type="text" class="edit_input" placeholder="物品">
                </div>
                <div class="message_edit_line">数量：
                    <input type="text" class="edit_input" placeholder="数量">
                </div>
                <div class="message_edit_line"> 时间：
                    <input type="text" class="edit_input" placeholder="时间" value='' id="BR_time">
                    <button class="btn roundnessButton" id="click">时</button>
                </div>
                <div class="message_edit_line">理由：
                    <textarea cols="22" rows="2" placeholder="备注"></textarea>
                    <!--            <input type="text" class="borrow_edit_input" placeholder="备注">-->
                </div>
                <div class="message_edit_line">
                    <button class="message_btn_ensure">确认</button>
                </div>
            </div>
        </div>
    </div>
    <script src="js/commonHtml-rightFrame.js" charset="utf-8" type="text/javascript"></script>
</div>
</div>

<script type="text/javascript" src="js/commonScript.js" charset="utf-8"></script>
<script type="text/javascript">
    var ctx = document.getElementById("chart_borrow").getContext("2d");
    var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'pie',

        // The data for our dataset
        data: {
            labels: ['拖鞋', '卡布奇诺', '拖把', '扫帚', '钳子'],
            datasets: [{
                backgroundColor: ['rgb(0,191,255)', 'rgb(255,126,0)', 'rgb(245,255,0)', 'rgb(0,255,36)',
                    'rgb(255,10,0)', 'rgb(255,0,201)'],
                data: ['6', '5', '10', '15', '6'],
            }]
        },


        // Configuration options go here
        options: {

            title: {
                display: true,
                text: '物品借用情况',
                fontColor: "rgba(255,255,255,0.68)",
            },
            legend: {
                display: true,
                position: 'right',
            },
            label: {
                font: {
                    color: "rgba(255,255,255,0.73)"
                }
            },
            segmentShowStroke: false
        }
    });

    $('#click').click(function () {
        var date = new Date();
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var hour = date.getHours();
        var minute = date.getMinutes();
        console.log(year + "." + month + "." + day + " " + hour + ":" + minute);
        // $('#BR_time').value = year+"."+month+"."+day+" "+hour+":"+minute+"";
        document.getElementById('BR_time').value = year + "." + month + "." + day + " " + hour + ":" + minute + "";
    });
    
    $('#leave_time').click(function () {
        var date = new Date();
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var hour = date.getHours();
        hour = hour>10?hour:"0"+hour;
        var minute = date.getMinutes();
        minute = minute>10?minute:"0"+minute;
        console.log(year + "." + month + "." + day + " " + hour + ":" + minute);
        document.getElementById('leave_time').value = year + "." + month + "." + day + " " + hour + ":" + minute+"";
    })
    
</script>
</body>
</html>