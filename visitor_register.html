<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="js/commonLink.js" charset="utf-8" type="text/javascript"></script>

    <link rel="stylesheet" href="css/common_register.css">
    <link rel="stylesheet" href="css/visitor_register.css">
</head>
<body>
<script type="text/javascript" src="js/common-returnIndexBtn.js" charset="utf-8"></script>
<script src="js/commonHtml-sideNav.js" charset="utf-8" type="text/javascript"></script>
<div class="DM-container">
    <div class="contentBox common_register">
        <div class="table_box">
            <table class="table table-bordered" id="table-register" frame="void">
                <caption>今日借用物品</caption>
                <thead>
                <tr>
                    <th data-field="Name">访客姓名</th>
                    <th data-field="phone">联系方式</th>
                    <th data-field="D_num">访问宿舍</th>
                    <th data-field="rel">被访学生学号</th>
                    <th data-field="result">来访原因</th>
                    <th data-field="reach">到访时间</th>
                    <th data-field="leave">离开时间</th>
                </tr>
                </thead>
                <tbody>
                <div class="dataDetailsBox"></div>
                <tr>
                    <td>黄茂平</td>
                    <td>13546</td>
                    <td>19-410</td>
                    <td>2315435</td>
                    <td>探亲</td>
                    <td>2020.4.1</td>
                    <td><input type="text" id="leave_time"><button class="btn btn-success btn-leave" id="leave_sure">确认</button> </td>
                </tr>
                <tr>
                    <td>黄茂平</td>
                    <td>13546</td>
                    <td>19-410</td>
                    <td>2315435</td>
                    <td>探亲</td>
                    <td>2020.4.1</td>
                    <td>2020.5.4</td>
                </tr>
                <tr>
                    <td>黄茂平</td>
                    <td>13546</td>
                    <td>19-410</td>
                    <td>2315435</td>
                    <td>探亲</td>
                    <td>2020.4.1</td>
                    <td>2020.5.4</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="message_box">
            <div class="box chart_box">
                <canvas id="chart_borrow"></canvas>
            </div>
            <div class="box message_edit_box">
                <div class="message_edit_line">访客姓名：
                    <input type="text" class="edit_input" placeholder="访客姓名">
                </div>

                <div class="message_edit_line"> 联系方式：
                    <input type="text" class="edit_input" placeholder="联系方式">
                </div>
                <div class="message_edit_line">访问宿舍：
                    <input type="text" class="edit_input" placeholder="访问宿舍">
                </div>
                <div class="message_edit_line"> 被访学生学号：
                    <input type="text" class="edit_input" placeholder="被访学生学号">
                </div>
                <div class="message_edit_line">来访时间：
                    <input type="text" class="edit_input" placeholder="时间" value='' id="BR_time">
                    <button class="btn roundnessButton" id="click">时</button>
                </div>
                <div class="message_edit_line">来访理由：
                    <textarea cols="22" rows="2" placeholder="理由"></textarea>
                </div>
                <div class="message_edit_line">
                    <button class="message_btn_ensure">确认</button>
                </div>
            </div>
        </div>
    </div>
    <script src="js/commonHtml-rightFrame.js" charset="utf-8" type="text/javascript"></script>
</div>
</div>

<script type="text/javascript" src="js/commonScript.js" charset="utf-8"></script>
<script type="text/javascript">


    //随机报修数
    var fixNum = (function () {
        var arr = [];
        for (var i = 0; i < 7; i++) {
            var r = Math.ceil(Math.random() * 10);
            arr.push(r + '');
        }
        return arr.reverse();
    })();
    var ctx_visit = document.getElementById("chart_borrow").getContext("2d");
    var chart = new Chart(ctx_visit, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
            datasets: [{
                backgroundColor: 'rgb(0,191,255)',
                borderColor: 'rgba(0,169,255,0.68)',
                data: fixNum,
            }]
        },


        // Configuration options go here
        options: {

            title: {
                display: true,
                text: '本周访客数量',
                fontColor: "rgba(255,255,255,0.68)",
            },
            legend: {
                display: false,
                position: 'right',
            },
            label: {
                font: {
                    color: "rgba(255,255,255,0.73)"
                }
            },
            segmentShowStroke: false
        }
    });

    $('#click').click(function () {
        var date = new Date();
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var hour = date.getHours();
        var minute = date.getMinutes();
        console.log(year + "." + month + "." + day + " " + hour + ":" + minute);
        // $('#BR_time').value = year+"."+month+"."+day+" "+hour+":"+minute+"";
        document.getElementById('BR_time').value = year + "." + month + "." + day + " " + hour + ":" + minute + "";
    });
    
    $('#leave_time').click(function () {
        var date = new Date();
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var hour = date.getHours();
        hour = hour>10?hour:"0"+hour;
        var minute = date.getMinutes();
        minute = minute>10?minute:"0"+minute;
        console.log(year + "." + month + "." + day + " " + hour + ":" + minute);
        document.getElementById('leave_time').value = year + "." + month + "." + day + " " + hour + ":" + minute+"";
    })
    
</script>
</body>
</html>